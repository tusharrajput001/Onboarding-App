import{createElement as e,useEffect as t,useState as n,createContext as a,useCallback as r,useRef as i,useLayoutEffect as o,useMemo as l}from"react";import{and as s}from"mendix/filters/builders";import{createPortal as d}from"react-dom";function c(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e("path",{fill:"currentColor",d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"}))}var u,m={exports:{}};
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/u=m,function(){var e={}.hasOwnProperty;function t(){for(var n=[],a=0;a<arguments.length;a++){var r=arguments[a];if(r){var i=typeof r;if("string"===i||"number"===i)n.push(r);else if(Array.isArray(r)&&r.length){var o=t.apply(null,r);o&&n.push(o)}else if("object"===i)for(var l in r)e.call(r,l)&&r[l]&&n.push(l)}}return n.join(" ")}u.exports?(t.default=t,u.exports=t):window.classNames=t}();var g=m.exports;function v(){const e=window["com.mendix.widgets.web.filterable.filterContext"];if(e)return{FilterContext:e};const t=a(void 0);return window["com.mendix.widgets.web.filterable.filterContext"]=t,{FilterContext:t}}function p(e,a){const[o,l]=n(),s=r((()=>{const t=null==e?void 0:e.getBoundingClientRect();var n,a;a=o,(n=t)&&a&&n.height===a.height&&n.width===a.width&&n.bottom===a.bottom&&n.top===a.top&&n.left===a.left&&n.right===a.right||l(t)}),[o,e]);return function(e){const n=i(),a=r((()=>{e(),n.current=window.requestAnimationFrame(a)}),[e]);t((()=>{if(e)return n.current=window.requestAnimationFrame(a),()=>{window.cancelAnimationFrame(n.current)}}),[e,a])}(a?s:void 0),o}function f(t){const[a,l]=n(0),s=i(null),d=r((e=>{Math.floor(e.target.scrollHeight-e.target.scrollTop)===Math.floor(e.target.clientHeight)&&t.hasMoreItems&&t.setPage&&t.setPage((e=>e+1))}),[t.hasMoreItems,t.setPage]),c=r((()=>{t.isInfinite&&t.hasMoreItems&&a<=0&&s.current&&l(s.current.clientHeight-30)}),[t.isInfinite,t.hasMoreItems,a]);return o((()=>{setTimeout((()=>c()),100)}),[c]),e("div",{ref:s,className:g(t.className,t.isInfinite?"infinite-loading":""),onScroll:t.isInfinite?d:void 0,role:t.role,style:t.isInfinite&&a>0?Object.assign(Object.assign({},t.style),{maxHeight:a}):t.style},t.children)}function h(t){var n,a,r,i,o,l,s;const d=void 0!==t.numberOfItems?Math.ceil(t.numberOfItems/t.pageSize):void 0,c=void 0!==d?d-1:0,u=void 0!==d,m=t.page*t.pageSize+1,g=t.canNextPage||!t.numberOfItems?(t.page+1)*t.pageSize:t.numberOfItems,v=e=>{t.setPaginationIndex&&t.setPaginationIndex(e)};if(0===t.numberOfItems)return null;const p="".concat(m," to ").concat(g," ").concat(u?"of ".concat(null!==(n=t.numberOfItems)&&void 0!==n?n:(null!=d?d:1)*t.pageSize):"");return e("div",{"aria-label":null!==(a=t.labelPagination)&&void 0!==a?a:"Pagination",className:"pagination-bar",role:"pagination"},e("button",Object.assign({className:"btn pagination-button",disabled:0===t.page},b((()=>{t.gotoPage(0),v(0)})),{"aria-label":null!==(r=t.labelFirstPage)&&void 0!==r?r:"Go to first page"}),e("span",{"aria-hidden":!0,className:"glyphicon glyphicon-step-backward"})),e("button",Object.assign({className:"btn pagination-button",disabled:!t.canPreviousPage},b((()=>{t.previousPage(),v(t.page-1)})),{"aria-label":null!==(i=t.labelPreviousPage)&&void 0!==i?i:"Go to previous page"}),e("span",{"aria-hidden":!0,className:"glyphicon glyphicon-backward"})),e("span",{className:"sr-only sr-only-focusable"},null!==(o=t.labelPagingStatus)&&void 0!==o?o:"Currently showing"," ",p),e("div",{"aria-hidden":!0,className:"paging-status"},p),e("button",Object.assign({"aria-label":null!==(l=t.labelNextPage)&&void 0!==l?l:"Go to next page",className:"btn pagination-button",disabled:!t.canNextPage},b((()=>{t.nextPage(),v(t.page+1)}))),e("span",{"aria-hidden":!0,className:"glyphicon glyphicon-forward"})),u&&e("button",Object.assign({"aria-label":null!==(s=t.labelLastPage)&&void 0!==s?s:"Go to last page",className:"btn pagination-button",disabled:t.page===c},b((()=>{t.gotoPage(c),v(c)}))),e("span",{"aria-hidden":!0,className:"glyphicon glyphicon-step-forward"})))}function b(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}function w(a){var o;const[s,u]=n(!1),m=i(null),g=i(null),v=p(g.current,s);var f,h;t((()=>{const e=e=>{if(Array.isArray(f)){if(f.some((t=>!t.current||t.current.contains(e.target))))return}else if(!f.current||f.current.contains(e.target))return;h()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[f=[g,m],h=()=>u(!1)]);const b=null!==(o=a.label)&&void 0!==o?o:"Column selector",w=r(((e,t)=>a.setHiddenColumns((n=>e?[...n,t]:n.filter((e=>e!==t))))),[a.setHiddenColumns]),y=l((()=>a.columns.findIndex((e=>e.canHide))),[a.columns]),x=l((()=>a.columns.map((e=>e.canHide)).lastIndexOf(!0)),[a.columns]),N=d(e("ul",{ref:m,id:"".concat(a.id,"-column-selectors"),className:"column-selectors","data-focusindex":0,role:"menu",style:{position:"fixed",top:null==v?void 0:v.bottom,right:void 0!==(null==v?void 0:v.right)?document.body.clientWidth-v.right:void 0}},a.columns.map(((t,n)=>{const r=!a.hiddenColumns.includes(t.id);return t.canHide?e("li",{key:n,onClick:e=>{e.preventDefault(),e.stopPropagation(),w(r,t.id)},onKeyDown:e=>{var a;"Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),w(r,t.id)):("Tab"===e.key&&(n===x||e.shiftKey&&n===y)||"Escape"===e.key)&&(e.preventDefault(),u(!1),null===(a=g.current)||void 0===a||a.focus())},role:"menuitem",tabIndex:0},e("input",{checked:r,disabled:r&&a.columns.length-a.hiddenColumns.length==1,id:"".concat(a.id,"_checkbox_toggle_").concat(n),style:{pointerEvents:"none"},type:"checkbox",tabIndex:-1}),e("label",{htmlFor:"".concat(a.id,"_checkbox_toggle_").concat(n),style:{pointerEvents:"none"}},t.header)):null}))),document.body),P=r((()=>{u((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=m.current)||void 0===e?void 0:e.querySelector("li"))||void 0===t||t.focus()}),10)}),[]);return e("div",{"aria-label":b,className:"th column-selector",role:"columnheader",title:b},e("div",{className:"column-selector-content"},e("button",{"aria-label":b,ref:g,className:"btn btn-default column-selector-button",onClick:P,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),P())},"aria-haspopup":!0,"aria-expanded":s,"aria-controls":"".concat(a.id,"-column-selectors")},e(c,null))),s&&N)}function y(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-down",className:"svg-inline--fa fa-long-arrow-alt-down fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z"}))}function x(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-up",className:"svg-inline--fa fa-long-arrow-alt-up fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z"}))}function N(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt-v",className:"svg-inline--fa fa-arrows-alt-v fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))}function P(t){var n;const a=t.sortable&&t.column.canSort,i=t.draggable&&null!==(n=t.column.canDrag)&&void 0!==n&&n,o=function(e,t,n,a,i){const o=r((e=>{i(!0);const{id:t}=e.target;e.dataTransfer.setData("colDestination",t)}),[i]),l=r((e=>{e.preventDefault()}),[]),s=r((e=>{const{id:t}=e.target;t!==e.dataTransfer.getData("colDestination")&&a(t)}),[a]),d=r((()=>{i(!1),a("")}),[a,i]),c=r((e=>{d();const{id:a}=e.target,r=e.dataTransfer.getData("colDestination"),i=t.findIndex((e=>e.id===a)),o=t.findIndex((e=>e.id===r));if(i!==o){const e=[...t.map((e=>e.id))];e.splice(o,1),e.splice(i,0,r),n(e)}}),[d,n,t]);return e?{draggable:!0,onDragStart:o,onDragOver:l,onDrop:c,onDragEnter:s,onDragEnd:d}:{}}(i,t.visibleColumns,t.setColumnOrder,t.setDragOver,t.setIsDragging),[l]=t.sortBy,s=l&&l.id===t.column.id,d=s&&l.desc,c=a?e(s?d?y:x:N,null):null,u=t.column.header.trim(),m=()=>{s?s&&!d?t.setSortBy([{id:t.column.id,desc:!0}]):t.setSortBy([]):t.setSortBy([{id:t.column.id,desc:!1}])},v={onClick:m,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},role:"button",tabIndex:0};return e("div",{"aria-label":u,"aria-sort":a?s?d?"descending":"ascending":"none":void 0,className:g("th",{"hidden-column-preview":t.preview&&t.hidable&&t.column.hidden}),role:"columnheader",style:t.sortable&&t.column.canSort?void 0:{cursor:"unset"},title:u},e("div",{className:g("column-container",i&&t.column.id===t.dragOver?"dragging":""),id:t.column.id,...o},e("div",{className:g("column-header",a?"clickable":"",t.className),id:t.column.id,style:{pointerEvents:t.isDragging?"none":void 0},...a?v:void 0},e("span",null,u.length>0?u:" "),c),t.filterable&&t.column.customFilter?t.column.customFilter:null),t.resizable&&t.column.canResize&&t.resizer)}function I(e,t){return JSON.stringify(e)===JSON.stringify(t)?e:t}function C({minWidth:a=50,setColumnWidth:o,onResizeEnds:l}){const[s,d]=n(!1),[c,u]=n(0),[m,g]=n(0),v=i(null),p=r((e=>{const t=e.touches?e.touches[0].screenX:e.screenX;if(u(t),d(!0),v.current){const e=v.current.parentElement;g(e.clientWidth)}}),[v.current]),f=r((()=>{s&&(d(!1),g(0),null==l||l())}),[l,s]),h=r((e=>{if(!s)return;const t=e.touches?e.touches[0].screenX:e.screenX;if(m){let e=m-(c-t);e<a&&(e=a),o(e)}}),[s,m,c]);return t((()=>(document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),document.addEventListener("touchmove",h),document.addEventListener("touchend",f),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",f)})),[h,f]),e("div",{"aria-hidden":!0,ref:v,className:"column-resizer",onMouseDown:p,onTouchStart:p},e("div",{className:"column-resizer-bar"}))}function S(a){var o;const s=!a.paging,[d,c]=n(!1),[u,m]=n(""),[v,p]=n([]),[b,y]=n(null!==(o=a.columns.map(((e,t)=>a.columnsHidable&&"hidden"===e.hidable&&!a.preview?t.toString():void 0)).filter(Boolean))&&void 0!==o?o:[]),[x,N]=n([]),[S,D]=n(Object.fromEntries(a.columns.map(((e,t)=>[t.toString(),void 0])))),{updateSettings:O}=function(e,n,a,o,s,d,c,u,m,g){const v=i(),p=i(!0),f=l((()=>n.map(((e,t)=>({header:e.header,id:t.toString(),hidable:e.hidable})))),[n]);return t((()=>{if(e&&"loading"!==e.status&&e.value&&e.value!==v.current){const t=JSON.parse(e.value).map((e=>{var t;return{...e,columnId:(null===(t=f.find((t=>t.header===e.column)))||void 0===t?void 0:t.id)||""}})),n={columnOrder:t.sort(((e,t)=>e.order-t.order)).map((e=>e.columnId)),hiddenColumns:t.filter((e=>e.hidden)).map((e=>e.columnId)),sortBy:t.filter((e=>e.sort)).map((e=>({id:e.columnId,desc:"desc"===e.sortMethod}))),widths:Object.fromEntries(t.map((e=>[e.columnId,e.width])))};v.current=e.value,p.current=!1,o((e=>I(e,n.columnOrder))),d((e=>I(e,n.hiddenColumns))),u((e=>I(e,n.sortBy))),g((e=>I(e,n.widths))),setTimeout((()=>{p.current=!0}),100)}}),[e,f,v.current]),{updateSettings:r((()=>{var t;if(e&&"available"===e.status&&p.current){const n=JSON.stringify(null!==(t=function({columnOrder:e,hiddenColumns:t,sortBy:n,widths:a},r){return r.map(((r,i)=>{var o;const l=e.findIndex((e=>e===r.id));return{column:r.header,sort:!!n.find((e=>e.id===r.id)),sortMethod:(null===(o=n.find((e=>e.id===r.id)))||void 0===o?void 0:o.desc)?"desc":"asc",hidden:!!t.find((e=>e===r.id)),order:l>-1?l:i,width:a[r.id]}}))}({columnOrder:a,hiddenColumns:s,sortBy:c,widths:m},f))&&void 0!==t?t:[]);v.current!==n&&e.value!==n&&(e.setValue(n),v.current=n)}}),[e,a,s,c,m,f])}}(a.settings,a.columns,v,p,b,y,x,N,S,D);t((()=>O()),[v,b,x]),t((()=>{var e,t,n;const[r]=x;r&&"id"in r&&"desc"in r?null===(e=a.setSortParameters)||void 0===e||e.call(a,{columnIndex:Number(r.id),desc:null!==(t=r.desc)&&void 0!==t&&t}):null===(n=a.setSortParameters)||void 0===n||n.call(a,void 0)}),[x,a.setSortParameters]);const z=r((t=>e("div",{className:"filter",style:{pointerEvents:d?"none":void 0}},t)),[d]),E=l((()=>a.columns.map(((e,t)=>{var n;return{id:t.toString(),accessor:"item",alignment:e.alignment,header:e.header,hidden:"hidden"===e.hidable,canHide:"no"!==e.hidable,canDrag:e.draggable,canResize:e.resizable,canSort:e.sortable,customFilter:a.columnsFilterable?a.filterRenderer(z,t):null,width:e.width,weight:null!==(n=e.size)&&void 0!==n?n:1}}))),[a.columns,a.filterRenderer,a.columnsFilterable,z]),k=l((()=>E.filter((e=>!b.includes(e.id))).sort(((e,t)=>function(e,t,n){let a=e.findIndex((e=>e===t.id)),r=e.findIndex((e=>e===n.id));a<0&&(a=Number(t.id));r<0&&(r=Number(n.id));return a<r?-1:a>r?1:0}(v,e,t)))),[E,b,v]),F=r(((t,n,r)=>k.find((e=>e.id===t.id))||a.preview?a.cellRenderer(((i,o,l)=>e("div",{key:"row_".concat(n.id,"_cell_").concat(t.id),className:g("td",{"td-borders":0===r},o,{clickable:!!l,"hidden-column-preview":a.preview&&a.columnsHidable&&t.hidden}),onClick:l,onKeyDown:l?e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l())}:void 0,role:l?"button":"cell",tabIndex:l?0:void 0},i)),n,Number(t.id)):null),[a.cellRenderer,a.columnsHidable,a.preview,k]),H=l((()=>a.data.map((e=>({item:e})))),[a.data]),T=a.paging?e(h,{canNextPage:a.hasMoreItems,canPreviousPage:0!==a.page,gotoPage:e=>a.setPage&&a.setPage((()=>e)),nextPage:()=>a.setPage&&a.setPage((e=>e+1)),numberOfItems:a.numberOfItems,page:a.page,pageSize:a.pageSize,previousPage:()=>a.setPage&&a.setPage((e=>e-1))}):null,L=l((()=>({gridTemplateColumns:k.map((e=>{const t=S[e.id];if(t)return"".concat(t,"px");switch(e.width){case"autoFit":return"fit-content(100%)";case"manual":return"".concat(e.weight,"fr");default:return"1fr"}})).join(" ")+(a.columnsHidable?" fit-content(50px)":"")})),[S,k,a.columnsHidable]);return e("div",{className:a.className,style:a.styles},e("div",{className:"table",role:"table"},e("div",{className:"table-header",role:"rowgroup"},"top"===a.pagingPosition&&T),a.headerFilters&&e("div",{className:"header-filters",role:"rowgroup","aria-label":a.filtersTitle},a.headerFilters),e(f,{className:"table-content",hasMoreItems:a.hasMoreItems,isInfinite:s,role:"rowgroup",setPage:a.setPage,style:L},e("div",{className:"tr",role:"row"},k.map((t=>a.headerWrapperRenderer(Number(t.id),e(P,{key:"headers_column_".concat(t.id),className:"align-column-".concat(t.alignment),column:t,draggable:a.columnsDraggable,dragOver:u,filterable:a.columnsFilterable,hidable:a.columnsHidable,isDragging:d,preview:a.preview,resizable:a.columnsResizable,resizer:e(C,{onResizeEnds:O,setColumnWidth:e=>D((n=>(n[t.id]=e,{...n})))}),setColumnOrder:e=>p(e),setDragOver:m,setIsDragging:c,setSortBy:N,sortable:a.columnsSortable,sortBy:x,visibleColumns:k})))),a.columnsHidable&&e(w,{columns:E,hiddenColumns:b,id:a.id,setHiddenColumns:y})),H.map(((t,n)=>{var r;return e("div",{key:"row_".concat(t.item.id),className:g("tr",null===(r=a.rowClass)||void 0===r?void 0:r.call(a,t.item)),role:"row"},k.map((e=>F(e,t.item,n))),a.columnsHidable&&e("div",{"aria-hidden":!0,className:g("td column-selector",{"td-borders":0===n})}))})),(0===a.data.length||a.preview)&&a.emptyPlaceholderRenderer&&a.emptyPlaceholderRenderer((t=>e("div",{className:g("td","td-borders"),style:{gridColumn:"span ".concat(a.columns.length+(a.columnsHidable?1:0))}},e("div",{className:"empty-placeholder"},t))))),e("div",{className:"table-footer",role:"rowgroup"},"bottom"===a.pagingPosition&&T)))}const D=e=>e&&"available"===e.status&&e.value;var O;function z(e,t){if(!e||!t)return[];const n=E(t);return n?n.filter((e=>!!e.arg1&&!!e.arg2)).filter((t=>"attribute"===t.arg1.type&&t.arg1.attributeId===e.id)).map((e=>({type:e.name,value:e.arg2.value}))):[]}function E(e){return!e||"function"!==e.type||"and"!==e.name&&"or"!==e.name?e?[e]:void 0:e.args.flatMap(E).filter((e=>void 0!==e))}function k(a){var o,d,c;const u=i("DataGrid".concat(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}())),[m,p]=n(void 0),f="virtualScrolling"===a.pagination,h=f?a.datasource.limit/a.pageSize:a.datasource.offset/a.pageSize,b=i(void 0),[w,y]=n(!1),x={string:n(),number:n(),date:n(),enum:n()},{FilterContext:N}=v(),P=function({onClick:t,columns:n}){return r(((a,r,i)=>{var o,l,s,d,c,u,m,v,p,f;const h=n[i],b=h.tooltip&&(null===(o=h.tooltip.get(r))||void 0===o?void 0:o.value);let w;return w="attribute"===h.showContentAs?e("span",{title:b,className:"td-text"},null!==(d=null===(s=null===(l=h.attribute)||void 0===l?void 0:l.get(r))||void 0===s?void 0:s.displayValue)&&void 0!==d?d:""):"dynamicText"===h.showContentAs?e("span",{title:b,className:"td-text"},null!==(m=null===(u=null===(c=h.dynamicText)||void 0===c?void 0:c.get(r))||void 0===u?void 0:u.value)&&void 0!==m?m:""):null===(v=h.content)||void 0===v?void 0:v.get(r),a(w,g("align-column-".concat(h.alignment),null===(f=null===(p=h.columnClass)||void 0===p?void 0:p.get(r))||void 0===f?void 0:f.value,{"wrap-text":h.wrapText}),t?()=>{var e;(e=null==t?void 0:t.get(r))&&e.canExecute&&!e.isExecuting&&e.execute()}:void 0)}),[n,t])}({columns:a.columns,onClick:a.onClick});t((()=>{a.datasource.requestTotalCount(!0),a.datasource.limit===Number.POSITIVE_INFINITY&&a.datasource.setLimit(a.pageSize)}),[a.datasource,a.pageSize]),t((()=>{!a.datasource.filter||w||b.current||(b.current=a.datasource.filter)}),[a.datasource,a.configurationAttribute,w]);const I=r((e=>{const t=e(h);f?a.datasource.setLimit(t*a.pageSize):a.datasource.setOffset(t*a.pageSize)}),[a.datasource,a.pageSize,f,h]),C=a.columns.map((()=>n())),O=C.map((([e])=>{var t;return null===(t=null==e?void 0:e.getFilterCondition)||void 0===t?void 0:t.call(e)})).filter((e=>void 0!==e)).concat(Object.keys(x).map((e=>{var t;return null===(t=x[e][0])||void 0===t?void 0:t.getFilterCondition()})).filter((e=>void 0!==e)));O.length>0?a.datasource.setFilter(O.length>1?s(...O):O[0]):w?a.datasource.setFilter(void 0):a.datasource.setFilter(b.current),m?a.datasource.setSortOrder([[a.columns[m.columnIndex].attribute.id,m.desc?"desc":"asc"]]):a.datasource.setSortOrder(void 0);const E=l((()=>function(e){return e.map((e=>{var t,n,a;return{...e,header:e.header&&D(e.header)&&null!==(t=e.header.value)&&void 0!==t?t:"",sortable:e.sortable&&null!==(a=null===(n=e.attribute)||void 0===n?void 0:n.sortable)&&void 0!==a&&a}}))}(a.columns)),[a.columns]),k=l((()=>a.filterList.reduce(((e,{filter:t})=>({...e,[t.id]:t})),{})),[a.filterList]),F=l((()=>a.filterList.reduce(((e,{filter:t})=>({...e,[t.id]:z(t,b.current)})),{})),[a.filterList,b.current]);return e(S,{cellRenderer:P,className:a.class,columns:E,columnsDraggable:a.columnsDraggable,columnsFilterable:a.columnsFilterable,columnsHidable:a.columnsHidable,columnsResizable:a.columnsResizable,columnsSortable:a.columnsSortable,data:null!==(o=a.datasource.items)&&void 0!==o?o:[],emptyPlaceholderRenderer:r((t=>"custom"===a.showEmptyPlaceholder?t(a.emptyPlaceholder):e("div",null)),[a.emptyPlaceholder,a.showEmptyPlaceholder]),filterRenderer:r(((t,n)=>{const{attribute:r,filter:i}=a.columns[n],[,o]=C[n],l=z(r,b.current);return t(r?e(N.Provider,{value:{filterDispatcher:e=>(y(!0),o(e),e),singleAttribute:r,singleInitialFilter:l}},i):i)}),[N,C,a.columns]),filtersTitle:null===(d=a.filterSectionTitle)||void 0===d?void 0:d.value,hasMoreItems:null!==(c=a.datasource.hasMoreItems)&&void 0!==c&&c,headerWrapperRenderer:r(((e,t)=>t),[]),headerFilters:l((()=>a.showHeaderFilters?e(N.Provider,{value:{filterDispatcher:e=>{if(e.filterType){const[,t]=x[e.filterType];t(e),y(!0)}return e},multipleAttributes:k,multipleInitialFilters:F}},a.filtersPlaceholder):null),[N,C,k,F,a.filtersPlaceholder]),id:u.current,numberOfItems:a.datasource.totalCount,page:h,pageSize:a.pageSize,paging:"buttons"===a.pagination,pagingPosition:a.pagingPosition,rowClass:r((e=>{var t,n,r;return null!==(r=null===(n=null===(t=a.rowClass)||void 0===t?void 0:t.get(e))||void 0===n?void 0:n.value)&&void 0!==r?r:""}),[a.rowClass]),setPage:I,setSortParameters:p,settings:a.configurationAttribute,styles:a.style,valueForSort:r(((e,t)=>{const n=a.columns[t];return n.attribute?n.attribute.get(e).value:""}),[a.columns])})}!function(e){e.Number="number",e.DateTime="datetime"}(O||(O={}));export{k as default};
