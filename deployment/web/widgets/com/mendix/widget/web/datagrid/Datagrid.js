define(["react","mendix/filters/builders","react-dom"],(function(e,t,n){"use strict";function a(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e.createElement("path",{fill:"currentColor",d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"}))}var l,r={exports:{}};
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */l=r,function(){var e={}.hasOwnProperty;function t(){for(var n=[],a=0;a<arguments.length;a++){var l=arguments[a];if(l){var r=typeof l;if("string"===r||"number"===r)n.push(l);else if(Array.isArray(l)&&l.length){var o=t.apply(null,l);o&&n.push(o)}else if("object"===r)for(var i in l)e.call(l,i)&&l[i]&&n.push(i)}}return n.join(" ")}l.exports?(t.default=t,l.exports=t):window.classNames=t}();var o=r.exports;function i(){const t=window["com.mendix.widgets.web.filterable.filterContext"];if(t)return{FilterContext:t};const n=e.createContext(void 0);return window["com.mendix.widgets.web.filterable.filterContext"]=n,{FilterContext:n}}function s(t,n){const[a,l]=e.useState(),r=e.useCallback((()=>{const e=null==t?void 0:t.getBoundingClientRect();var n,r;r=a,(n=e)&&r&&n.height===r.height&&n.width===r.width&&n.bottom===r.bottom&&n.top===r.top&&n.left===r.left&&n.right===r.right||l(e)}),[a,t]);return function(t){const n=e.useRef(),a=e.useCallback((()=>{t(),n.current=window.requestAnimationFrame(a)}),[t]);e.useEffect((()=>{if(t)return n.current=window.requestAnimationFrame(a),()=>{window.cancelAnimationFrame(n.current)}}),[t,a])}(n?r:void 0),a}function c(t){const[n,a]=e.useState(0),l=e.useRef(null),r=e.useCallback((e=>{Math.floor(e.target.scrollHeight-e.target.scrollTop)===Math.floor(e.target.clientHeight)&&t.hasMoreItems&&t.setPage&&t.setPage((e=>e+1))}),[t.hasMoreItems,t.setPage]),i=e.useCallback((()=>{t.isInfinite&&t.hasMoreItems&&n<=0&&l.current&&a(l.current.clientHeight-30)}),[t.isInfinite,t.hasMoreItems,n]);return e.useLayoutEffect((()=>{setTimeout((()=>i()),100)}),[i]),e.createElement("div",{ref:l,className:o(t.className,t.isInfinite?"infinite-loading":""),onScroll:t.isInfinite?r:void 0,role:t.role,style:t.isInfinite&&n>0?Object.assign(Object.assign({},t.style),{maxHeight:n}):t.style},t.children)}function u(t){var n,a,l,r,o,i,s;const c=void 0!==t.numberOfItems?Math.ceil(t.numberOfItems/t.pageSize):void 0,u=void 0!==c?c-1:0,m=void 0!==c,g=t.page*t.pageSize+1,v=t.canNextPage||!t.numberOfItems?(t.page+1)*t.pageSize:t.numberOfItems,f=e=>{t.setPaginationIndex&&t.setPaginationIndex(e)};if(0===t.numberOfItems)return null;const p="".concat(g," to ").concat(v," ").concat(m?"of ".concat(null!==(n=t.numberOfItems)&&void 0!==n?n:(null!=c?c:1)*t.pageSize):"");return e.createElement("div",{"aria-label":null!==(a=t.labelPagination)&&void 0!==a?a:"Pagination",className:"pagination-bar",role:"pagination"},e.createElement("button",Object.assign({className:"btn pagination-button",disabled:0===t.page},d((()=>{t.gotoPage(0),f(0)})),{"aria-label":null!==(l=t.labelFirstPage)&&void 0!==l?l:"Go to first page"}),e.createElement("span",{"aria-hidden":!0,className:"glyphicon glyphicon-step-backward"})),e.createElement("button",Object.assign({className:"btn pagination-button",disabled:!t.canPreviousPage},d((()=>{t.previousPage(),f(t.page-1)})),{"aria-label":null!==(r=t.labelPreviousPage)&&void 0!==r?r:"Go to previous page"}),e.createElement("span",{"aria-hidden":!0,className:"glyphicon glyphicon-backward"})),e.createElement("span",{className:"sr-only sr-only-focusable"},null!==(o=t.labelPagingStatus)&&void 0!==o?o:"Currently showing"," ",p),e.createElement("div",{"aria-hidden":!0,className:"paging-status"},p),e.createElement("button",Object.assign({"aria-label":null!==(i=t.labelNextPage)&&void 0!==i?i:"Go to next page",className:"btn pagination-button",disabled:!t.canNextPage},d((()=>{t.nextPage(),f(t.page+1)}))),e.createElement("span",{"aria-hidden":!0,className:"glyphicon glyphicon-forward"})),m&&e.createElement("button",Object.assign({"aria-label":null!==(s=t.labelLastPage)&&void 0!==s?s:"Go to last page",className:"btn pagination-button",disabled:t.page===u},d((()=>{t.gotoPage(u),f(u)}))),e.createElement("span",{"aria-hidden":!0,className:"glyphicon glyphicon-step-forward"})))}function d(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}function m(t){var l;const[r,o]=e.useState(!1),i=e.useRef(null),c=e.useRef(null),u=s(c.current,r);var d,m;d=[c,i],m=()=>o(!1),e.useEffect((()=>{const e=e=>{if(Array.isArray(d)){if(d.some((t=>!t.current||t.current.contains(e.target))))return}else if(!d.current||d.current.contains(e.target))return;m()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[d,m]);const g=null!==(l=t.label)&&void 0!==l?l:"Column selector",v=e.useCallback(((e,n)=>t.setHiddenColumns((t=>e?[...t,n]:t.filter((e=>e!==n))))),[t.setHiddenColumns]),f=e.useMemo((()=>t.columns.findIndex((e=>e.canHide))),[t.columns]),p=e.useMemo((()=>t.columns.map((e=>e.canHide)).lastIndexOf(!0)),[t.columns]),b=n.createPortal(e.createElement("ul",{ref:i,id:"".concat(t.id,"-column-selectors"),className:"column-selectors","data-focusindex":0,role:"menu",style:{position:"fixed",top:null==u?void 0:u.bottom,right:void 0!==(null==u?void 0:u.right)?document.body.clientWidth-u.right:void 0}},t.columns.map(((n,a)=>{const l=!t.hiddenColumns.includes(n.id);return n.canHide?e.createElement("li",{key:a,onClick:e=>{e.preventDefault(),e.stopPropagation(),v(l,n.id)},onKeyDown:e=>{var t;"Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),v(l,n.id)):("Tab"===e.key&&(a===p||e.shiftKey&&a===f)||"Escape"===e.key)&&(e.preventDefault(),o(!1),null===(t=c.current)||void 0===t||t.focus())},role:"menuitem",tabIndex:0},e.createElement("input",{checked:l,disabled:l&&t.columns.length-t.hiddenColumns.length==1,id:"".concat(t.id,"_checkbox_toggle_").concat(a),style:{pointerEvents:"none"},type:"checkbox",tabIndex:-1}),e.createElement("label",{htmlFor:"".concat(t.id,"_checkbox_toggle_").concat(a),style:{pointerEvents:"none"}},n.header)):null}))),document.body),h=e.useCallback((()=>{o((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=i.current)||void 0===e?void 0:e.querySelector("li"))||void 0===t||t.focus()}),10)}),[]);return e.createElement("div",{"aria-label":g,className:"th column-selector",role:"columnheader",title:g},e.createElement("div",{className:"column-selector-content"},e.createElement("button",{"aria-label":g,ref:c,className:"btn btn-default column-selector-button",onClick:h,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),h())},"aria-haspopup":!0,"aria-expanded":r,"aria-controls":"".concat(t.id,"-column-selectors")},e.createElement(a,null))),r&&b)}function g(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-down",className:"svg-inline--fa fa-long-arrow-alt-down fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z"}))}function v(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-up",className:"svg-inline--fa fa-long-arrow-alt-up fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z"}))}function f(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt-v",className:"svg-inline--fa fa-arrows-alt-v fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))}function p(t){var n;const a=t.sortable&&t.column.canSort,l=t.draggable&&null!==(n=t.column.canDrag)&&void 0!==n&&n,r=function(t,n,a,l,r){const o=e.useCallback((e=>{r(!0);const{id:t}=e.target;e.dataTransfer.setData("colDestination",t)}),[r]),i=e.useCallback((e=>{e.preventDefault()}),[]),s=e.useCallback((e=>{const{id:t}=e.target;t!==e.dataTransfer.getData("colDestination")&&l(t)}),[l]),c=e.useCallback((()=>{r(!1),l("")}),[l,r]),u=e.useCallback((e=>{c();const{id:t}=e.target,l=e.dataTransfer.getData("colDestination"),r=n.findIndex((e=>e.id===t)),o=n.findIndex((e=>e.id===l));if(r!==o){const e=[...n.map((e=>e.id))];e.splice(o,1),e.splice(r,0,l),a(e)}}),[c,a,n]);return t?{draggable:!0,onDragStart:o,onDragOver:i,onDrop:u,onDragEnter:s,onDragEnd:c}:{}}(l,t.visibleColumns,t.setColumnOrder,t.setDragOver,t.setIsDragging),[i]=t.sortBy,s=i&&i.id===t.column.id,c=s&&i.desc,u=a?s?c?e.createElement(g,null):e.createElement(v,null):e.createElement(f,null):null,d=t.column.header.trim(),m=()=>{s?s&&!c?t.setSortBy([{id:t.column.id,desc:!0}]):t.setSortBy([]):t.setSortBy([{id:t.column.id,desc:!1}])},p={onClick:m,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},role:"button",tabIndex:0};return e.createElement("div",{"aria-label":d,"aria-sort":a?s?c?"descending":"ascending":"none":void 0,className:o("th",{"hidden-column-preview":t.preview&&t.hidable&&t.column.hidden}),role:"columnheader",style:t.sortable&&t.column.canSort?void 0:{cursor:"unset"},title:d},e.createElement("div",{className:o("column-container",l&&t.column.id===t.dragOver?"dragging":""),id:t.column.id,...r},e.createElement("div",{className:o("column-header",a?"clickable":"",t.className),id:t.column.id,style:{pointerEvents:t.isDragging?"none":void 0},...a?p:void 0},e.createElement("span",null,d.length>0?d:"Â "),u),t.filterable&&t.column.customFilter?t.column.customFilter:null),t.resizable&&t.column.canResize&&t.resizer)}function b(e,t){return JSON.stringify(e)===JSON.stringify(t)?e:t}function h({minWidth:t=50,setColumnWidth:n,onResizeEnds:a}){const[l,r]=e.useState(!1),[o,i]=e.useState(0),[s,c]=e.useState(0),u=e.useRef(null),d=e.useCallback((e=>{const t=e.touches?e.touches[0].screenX:e.screenX;if(i(t),r(!0),u.current){const e=u.current.parentElement;c(e.clientWidth)}}),[u.current]),m=e.useCallback((()=>{l&&(r(!1),c(0),null==a||a())}),[a,l]),g=e.useCallback((e=>{if(!l)return;const a=e.touches?e.touches[0].screenX:e.screenX;if(s){let e=s-(o-a);e<t&&(e=t),n(e)}}),[l,s,o]);return e.useEffect((()=>(document.addEventListener("mousemove",g),document.addEventListener("mouseup",m),document.addEventListener("touchmove",g),document.addEventListener("touchend",m),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",m)})),[g,m]),e.createElement("div",{"aria-hidden":!0,ref:u,className:"column-resizer",onMouseDown:d,onTouchStart:d},e.createElement("div",{className:"column-resizer-bar"}))}function w(t){var n;const a=!t.paging,[l,r]=e.useState(!1),[i,s]=e.useState(""),[d,g]=e.useState([]),[v,f]=e.useState(null!==(n=t.columns.map(((e,n)=>t.columnsHidable&&"hidden"===e.hidable&&!t.preview?n.toString():void 0)).filter(Boolean))&&void 0!==n?n:[]),[w,E]=e.useState([]),[y,C]=e.useState(Object.fromEntries(t.columns.map(((e,t)=>[t.toString(),void 0])))),{updateSettings:S}=function(t,n,a,l,r,o,i,s,c,u){const d=e.useRef(),m=e.useRef(!0),g=e.useMemo((()=>n.map(((e,t)=>({header:e.header,id:t.toString(),hidable:e.hidable})))),[n]);return e.useEffect((()=>{if(t&&"loading"!==t.status&&t.value&&t.value!==d.current){const e=JSON.parse(t.value).map((e=>{var t;return{...e,columnId:(null===(t=g.find((t=>t.header===e.column)))||void 0===t?void 0:t.id)||""}})),n={columnOrder:e.sort(((e,t)=>e.order-t.order)).map((e=>e.columnId)),hiddenColumns:e.filter((e=>e.hidden)).map((e=>e.columnId)),sortBy:e.filter((e=>e.sort)).map((e=>({id:e.columnId,desc:"desc"===e.sortMethod}))),widths:Object.fromEntries(e.map((e=>[e.columnId,e.width])))};d.current=t.value,m.current=!1,l((e=>b(e,n.columnOrder))),o((e=>b(e,n.hiddenColumns))),s((e=>b(e,n.sortBy))),u((e=>b(e,n.widths))),setTimeout((()=>{m.current=!0}),100)}}),[t,g,d.current]),{updateSettings:e.useCallback((()=>{var e;if(t&&"available"===t.status&&m.current){const n=JSON.stringify(null!==(e=function({columnOrder:e,hiddenColumns:t,sortBy:n,widths:a},l){return l.map(((l,r)=>{var o;const i=e.findIndex((e=>e===l.id));return{column:l.header,sort:!!n.find((e=>e.id===l.id)),sortMethod:(null===(o=n.find((e=>e.id===l.id)))||void 0===o?void 0:o.desc)?"desc":"asc",hidden:!!t.find((e=>e===l.id)),order:i>-1?i:r,width:a[l.id]}}))}({columnOrder:a,hiddenColumns:r,sortBy:i,widths:c},g))&&void 0!==e?e:[]);d.current!==n&&t.value!==n&&(t.setValue(n),d.current=n)}}),[t,a,r,i,c,g])}}(t.settings,t.columns,d,g,v,f,w,E,y,C);e.useEffect((()=>S()),[d,v,w]),e.useEffect((()=>{var e,n,a;const[l]=w;l&&"id"in l&&"desc"in l?null===(e=t.setSortParameters)||void 0===e||e.call(t,{columnIndex:Number(l.id),desc:null!==(n=l.desc)&&void 0!==n&&n}):null===(a=t.setSortParameters)||void 0===a||a.call(t,void 0)}),[w,t.setSortParameters]);const x=e.useCallback((t=>e.createElement("div",{className:"filter",style:{pointerEvents:l?"none":void 0}},t)),[l]),N=e.useMemo((()=>t.columns.map(((e,n)=>{var a;return{id:n.toString(),accessor:"item",alignment:e.alignment,header:e.header,hidden:"hidden"===e.hidable,canHide:"no"!==e.hidable,canDrag:e.draggable,canResize:e.resizable,canSort:e.sortable,customFilter:t.columnsFilterable?t.filterRenderer(x,n):null,width:e.width,weight:null!==(a=e.size)&&void 0!==a?a:1}}))),[t.columns,t.filterRenderer,t.columnsFilterable,x]),P=e.useMemo((()=>N.filter((e=>!v.includes(e.id))).sort(((e,t)=>function(e,t,n){let a=e.findIndex((e=>e===t.id)),l=e.findIndex((e=>e===n.id));a<0&&(a=Number(t.id));l<0&&(l=Number(n.id));return a<l?-1:a>l?1:0}(d,e,t)))),[N,v,d]),k=e.useCallback(((n,a,l)=>P.find((e=>e.id===n.id))||t.preview?t.cellRenderer(((r,i,s)=>e.createElement("div",{key:"row_".concat(a.id,"_cell_").concat(n.id),className:o("td",{"td-borders":0===l},i,{clickable:!!s,"hidden-column-preview":t.preview&&t.columnsHidable&&n.hidden}),onClick:s,onKeyDown:s?e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s())}:void 0,role:s?"button":"cell",tabIndex:s?0:void 0},r)),a,Number(n.id)):null),[t.cellRenderer,t.columnsHidable,t.preview,P]),I=e.useMemo((()=>t.data.map((e=>({item:e})))),[t.data]),D=t.paging?e.createElement(u,{canNextPage:t.hasMoreItems,canPreviousPage:0!==t.page,gotoPage:e=>t.setPage&&t.setPage((()=>e)),nextPage:()=>t.setPage&&t.setPage((e=>e+1)),numberOfItems:t.numberOfItems,page:t.page,pageSize:t.pageSize,previousPage:()=>t.setPage&&t.setPage((e=>e-1))}):null,O=e.useMemo((()=>({gridTemplateColumns:P.map((e=>{const t=y[e.id];if(t)return"".concat(t,"px");switch(e.width){case"autoFit":return"fit-content(100%)";case"manual":return"".concat(e.weight,"fr");default:return"1fr"}})).join(" ")+(t.columnsHidable?" fit-content(50px)":"")})),[y,P,t.columnsHidable]);return e.createElement("div",{className:t.className,style:t.styles},e.createElement("div",{className:"table",role:"table"},e.createElement("div",{className:"table-header",role:"rowgroup"},"top"===t.pagingPosition&&D),t.headerFilters&&e.createElement("div",{className:"header-filters",role:"rowgroup","aria-label":t.filtersTitle},t.headerFilters),e.createElement(c,{className:"table-content",hasMoreItems:t.hasMoreItems,isInfinite:a,role:"rowgroup",setPage:t.setPage,style:O},e.createElement("div",{className:"tr",role:"row"},P.map((n=>t.headerWrapperRenderer(Number(n.id),e.createElement(p,{key:"headers_column_".concat(n.id),className:"align-column-".concat(n.alignment),column:n,draggable:t.columnsDraggable,dragOver:i,filterable:t.columnsFilterable,hidable:t.columnsHidable,isDragging:l,preview:t.preview,resizable:t.columnsResizable,resizer:e.createElement(h,{onResizeEnds:S,setColumnWidth:e=>C((t=>(t[n.id]=e,{...t})))}),setColumnOrder:e=>g(e),setDragOver:s,setIsDragging:r,setSortBy:E,sortable:t.columnsSortable,sortBy:w,visibleColumns:P})))),t.columnsHidable&&e.createElement(m,{columns:N,hiddenColumns:v,id:t.id,setHiddenColumns:f})),I.map(((n,a)=>{var l;return e.createElement("div",{key:"row_".concat(n.item.id),className:o("tr",null===(l=t.rowClass)||void 0===l?void 0:l.call(t,n.item)),role:"row"},P.map((e=>k(e,n.item,a))),t.columnsHidable&&e.createElement("div",{"aria-hidden":!0,className:o("td column-selector",{"td-borders":0===a})}))})),(0===t.data.length||t.preview)&&t.emptyPlaceholderRenderer&&t.emptyPlaceholderRenderer((n=>e.createElement("div",{className:o("td","td-borders"),style:{gridColumn:"span ".concat(t.columns.length+(t.columnsHidable?1:0))}},e.createElement("div",{className:"empty-placeholder"},n))))),e.createElement("div",{className:"table-footer",role:"rowgroup"},"bottom"===t.pagingPosition&&D)))}const E=e=>e&&"available"===e.status&&e.value;var y;function C(e,t){if(!e||!t)return[];const n=S(t);return n?n.filter((e=>!!e.arg1&&!!e.arg2)).filter((t=>"attribute"===t.arg1.type&&t.arg1.attributeId===e.id)).map((e=>({type:e.name,value:e.arg2.value}))):[]}function S(e){return!e||"function"!==e.type||"and"!==e.name&&"or"!==e.name?e?[e]:void 0:e.args.flatMap(S).filter((e=>void 0!==e))}return function(e){e.Number="number",e.DateTime="datetime"}(y||(y={})),function(n){var a,l,r;const s=e.useRef("DataGrid".concat(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}())),[c,u]=e.useState(void 0),d="virtualScrolling"===n.pagination,m=d?n.datasource.limit/n.pageSize:n.datasource.offset/n.pageSize,g=e.useRef(void 0),[v,f]=e.useState(!1),p={string:e.useState(),number:e.useState(),date:e.useState(),enum:e.useState()},{FilterContext:b}=i(),h=function({onClick:t,columns:n}){return e.useCallback(((a,l,r)=>{var i,s,c,u,d,m,g,v,f,p;const b=n[r],h=b.tooltip&&(null===(i=b.tooltip.get(l))||void 0===i?void 0:i.value);let w;return w="attribute"===b.showContentAs?e.createElement("span",{title:h,className:"td-text"},null!==(u=null===(c=null===(s=b.attribute)||void 0===s?void 0:s.get(l))||void 0===c?void 0:c.displayValue)&&void 0!==u?u:""):"dynamicText"===b.showContentAs?e.createElement("span",{title:h,className:"td-text"},null!==(g=null===(m=null===(d=b.dynamicText)||void 0===d?void 0:d.get(l))||void 0===m?void 0:m.value)&&void 0!==g?g:""):null===(v=b.content)||void 0===v?void 0:v.get(l),a(w,o("align-column-".concat(b.alignment),null===(p=null===(f=b.columnClass)||void 0===f?void 0:f.get(l))||void 0===p?void 0:p.value,{"wrap-text":b.wrapText}),t?()=>{var e;(e=null==t?void 0:t.get(l))&&e.canExecute&&!e.isExecuting&&e.execute()}:void 0)}),[n,t])}({columns:n.columns,onClick:n.onClick});e.useEffect((()=>{n.datasource.requestTotalCount(!0),n.datasource.limit===Number.POSITIVE_INFINITY&&n.datasource.setLimit(n.pageSize)}),[n.datasource,n.pageSize]),e.useEffect((()=>{!n.datasource.filter||v||g.current||(g.current=n.datasource.filter)}),[n.datasource,n.configurationAttribute,v]);const y=e.useCallback((e=>{const t=e(m);d?n.datasource.setLimit(t*n.pageSize):n.datasource.setOffset(t*n.pageSize)}),[n.datasource,n.pageSize,d,m]),S=n.columns.map((()=>e.useState())),x=S.map((([e])=>{var t;return null===(t=null==e?void 0:e.getFilterCondition)||void 0===t?void 0:t.call(e)})).filter((e=>void 0!==e)).concat(Object.keys(p).map((e=>{var t;return null===(t=p[e][0])||void 0===t?void 0:t.getFilterCondition()})).filter((e=>void 0!==e)));x.length>0?n.datasource.setFilter(x.length>1?t.and(...x):x[0]):v?n.datasource.setFilter(void 0):n.datasource.setFilter(g.current),c?n.datasource.setSortOrder([[n.columns[c.columnIndex].attribute.id,c.desc?"desc":"asc"]]):n.datasource.setSortOrder(void 0);const N=e.useMemo((()=>function(e){return e.map((e=>{var t,n,a;return{...e,header:e.header&&E(e.header)&&null!==(t=e.header.value)&&void 0!==t?t:"",sortable:e.sortable&&null!==(a=null===(n=e.attribute)||void 0===n?void 0:n.sortable)&&void 0!==a&&a}}))}(n.columns)),[n.columns]),P=e.useMemo((()=>n.filterList.reduce(((e,{filter:t})=>({...e,[t.id]:t})),{})),[n.filterList]),k=e.useMemo((()=>n.filterList.reduce(((e,{filter:t})=>({...e,[t.id]:C(t,g.current)})),{})),[n.filterList,g.current]);return e.createElement(w,{cellRenderer:h,className:n.class,columns:N,columnsDraggable:n.columnsDraggable,columnsFilterable:n.columnsFilterable,columnsHidable:n.columnsHidable,columnsResizable:n.columnsResizable,columnsSortable:n.columnsSortable,data:null!==(a=n.datasource.items)&&void 0!==a?a:[],emptyPlaceholderRenderer:e.useCallback((t=>"custom"===n.showEmptyPlaceholder?t(n.emptyPlaceholder):e.createElement("div",null)),[n.emptyPlaceholder,n.showEmptyPlaceholder]),filterRenderer:e.useCallback(((t,a)=>{const{attribute:l,filter:r}=n.columns[a],[,o]=S[a],i=C(l,g.current);return t(l?e.createElement(b.Provider,{value:{filterDispatcher:e=>(f(!0),o(e),e),singleAttribute:l,singleInitialFilter:i}},r):r)}),[b,S,n.columns]),filtersTitle:null===(l=n.filterSectionTitle)||void 0===l?void 0:l.value,hasMoreItems:null!==(r=n.datasource.hasMoreItems)&&void 0!==r&&r,headerWrapperRenderer:e.useCallback(((e,t)=>t),[]),headerFilters:e.useMemo((()=>n.showHeaderFilters?e.createElement(b.Provider,{value:{filterDispatcher:e=>{if(e.filterType){const[,t]=p[e.filterType];t(e),f(!0)}return e},multipleAttributes:P,multipleInitialFilters:k}},n.filtersPlaceholder):null),[b,S,P,k,n.filtersPlaceholder]),id:s.current,numberOfItems:n.datasource.totalCount,page:m,pageSize:n.pageSize,paging:"buttons"===n.pagination,pagingPosition:n.pagingPosition,rowClass:e.useCallback((e=>{var t,a,l;return null!==(l=null===(a=null===(t=n.rowClass)||void 0===t?void 0:t.get(e))||void 0===a?void 0:a.value)&&void 0!==l?l:""}),[n.rowClass]),setPage:y,setSortParameters:u,settings:n.configurationAttribute,styles:n.style,valueForSort:e.useCallback(((e,t)=>{const a=n.columns[t];return a.attribute?a.attribute.get(e).value:""}),[n.columns])})}}));
